<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates a Plotly sunburst chart that visualizes the hierarchical segmentation of referendum topic occurences."><title>Topic segmentation sunburst chart — plot_topic_segmentation • rdb</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link rel="stylesheet" href="../deps/all.min.css"><link rel="stylesheet" href="../deps/v4-shims.min.css"><script src="../deps/bootstrap-toc.min.js"></script><script src="../deps/headroom.min.js"></script><script src="../deps/jQuery.headroom.min.js"></script><script src="../deps/clipboard.min.js"></script><script src="../deps/fuse.min.js"></script><script src="../deps/autocomplete.jquery.min.js"></script><script src="../deps/mark.min.js"></script><script src="../deps/MathJax.js"></script><script src="../deps/TeX-AMS-MML_HTMLorMML.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Topic segmentation sunburst chart — plot_topic_segmentation"><meta property="og:description" content="Creates a Plotly sunburst chart that visualizes the hierarchical segmentation of referendum topic occurences."><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@2BSalim"><meta name="twitter:site" content="@2BSalim"><meta name="robots" content="noindex"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- dependencies from examples --><script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.2/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet"><script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet"><script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><script src="https://rpkg.dev/counter-dev.min.js" data-id="4c4963fe-9fcf-4d81-95bb-2135e114b85b" data-utcoffset="1"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rdb</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.0.9044</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/rdb.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/codebook.html">RDB codebook</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://gitlab.com/zdaarau/rpkgs/rdb/" aria-label="gitlab">
    <span class="fab fa fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Topic segmentation sunburst chart</h1>
      <small class="dont-index">Source: <a href="https://gitlab.com/zdaarau/rpkgs/rdb/blob/HEAD/R/rdb.gen.R" class="external-link"><code>R/rdb.gen.R</code></a></small>
      <div class="d-none name"><code>plot_topic_segmentation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a <a href="https://plotly.com/r/sunburst-charts/" class="external-link">Plotly sunburst chart</a> that visualizes the hierarchical segmentation of referendum topic occurences.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_topic_segmentation</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"per_rfrnd"</span>, <span class="st">"per_topic_lineage"</span>, <span class="st">"naive"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>RDB referendum data as returned by <code><a href="rfrnds.html">rfrnds()</a></code>. A data frame that at minimum contains the columns <code>topics_tier_1</code>, <code>topics_tier_2</code> and
<code>topics_tier_3</code>.</p></dd>


<dt>method</dt>
<dd><p>Applied method to count the number of topic occurences. One of</p><ul><li><p><strong><code>"per_rfrnd"</code></strong>: All <em>referendums</em> have the same weight. For a referendum with n different topics of the same tier, every topic is counted 1/n.</p></li>
<li><p><strong><code>"per_topic_lineage"</code></strong>: All <em>topic lineages</em> have the same weight. For a referendum with n different topics of the same tier, every topic is fully
counted, meaning that e.g. a referendum with three different tier-3 topics has a tripled impact on the result compared to a referendum that only has a
single one. Noticeably faster than <code>"per_rfrnd"</code>.</p></li>
<li><p><strong><code>"naive"</code></strong>: Naive procedure which doesn't properly reflect topic proportions on tier 2 and 3. Based on the (wrong) assumptions that a) all referendums
have the same number of topic lineages assigned and b) topics are not deduplicated per tier. By far the fastest method, though.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <a href="https://rdrr.io/pkg/plotly/man/plot_ly.html" class="external-link">plotly object</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A <em>topic lineage</em> is the hierarchical compound of a <code>topic_tier_1</code> and optionally a grandchild <code>topic_tier_3</code> and/or a child <code>topic_tier_2</code>.</p>
<p>Note that topics can be assigned on any tier to referendums (i.e. in one case, a <code>topic_tier_1</code> plus a child <code>topic_tier_2</code> is assigned, and in another case
only a <code>topic_tier_1</code> without any further child topic).</p>
<p>Furthermore, it should be noted that not every <code>topic_tier_2</code> has potential child <code>topic_tier_3</code>s. See the <a href="https://rdb.rpkg.dev/articles/codebook.html#topics">full topic hierarchy</a>
for details.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other visualization functions:
<code><a href="ggplot_streamgraph.html">ggplot_streamgraph</a>()</code>,
<code><a href="plot_rfrnd_share_per_period.html">plot_rfrnd_share_per_period</a>()</code>,
<code><a href="plot_topic_share_per_period.html">plot_topic_share_per_period</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># count each referendum equally</span></span></span>
<span class="r-in"><span><span class="fu">rdb</span><span class="fu">::</span><span class="fu"><a href="rfrnds.html">rfrnds</a></span><span class="op">(</span>country_code <span class="op">=</span> <span class="st">"AT"</span>,</span></span>
<span class="r-in"><span>            quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">rdb</span><span class="fu">::</span><span class="fu">plot_topic_segmentation</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"per_rfrnd"</span><span class="op">)</span></span></span>
<div id="htmlwidget-e5c8c404fe174e4c81bd" style="width:700px;height:432.632880098888px;" class="plotly html-widget "></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"visdat":{"c40ebb11689e":["function () ","plotlyVisDat"]},"cur_data":"c40ebb11689e","attrs":{"c40ebb11689e":{"labels":{},"parents":{},"ids":{},"values":{},"branchvalues":"total","insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sunburst"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["energy","foreign policy","security policy","state organisation","European policy","army","federalism","national identity","nuclear energy","political system","EU","military organisation","territorial questions","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>"],"parents":["","","","","foreign policy","security policy","state organisation","state organisation","energy","state organisation","European policy","army","federalism","European policy","army","energy","federalism","foreign policy","security policy","state organisation"],"ids":["energy","foreign policy","security policy","state organisation","European policy","army","federalism","national identity","nuclear energy","political system","EU","military organisation","territorial questions","NA_European policy","NA_army","NA_energy","NA_federalism","NA_foreign policy","NA_security policy","NA_state organisation"],"values":[1,1,2,6,1,2,1.8333333333333333,3.8333333333333335,1,0.33333333333333331,1,2,1.8333333333333333,0,0,0,0,0,0,0],"branchvalues":"total","insidetextorientation":"radial","type":"sunburst","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># count each topic lineage equally</span></span></span>
<span class="r-in"><span><span class="fu">rdb</span><span class="fu">::</span><span class="fu"><a href="rfrnds.html">rfrnds</a></span><span class="op">(</span>country_code <span class="op">=</span> <span class="st">"AT"</span>,</span></span>
<span class="r-in"><span>            quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">rdb</span><span class="fu">::</span><span class="fu">plot_topic_segmentation</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"per_topic_lineage"</span><span class="op">)</span></span></span>
<div id="htmlwidget-36aa3d2a04d42bbc2145" style="width:700px;height:432.632880098888px;" class="plotly html-widget "></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"visdat":{"c40eb28c078fb":["function () ","plotlyVisDat"]},"cur_data":"c40eb28c078fb","attrs":{"c40eb28c078fb":{"labels":{},"parents":{},"ids":{},"values":{},"branchvalues":"total","insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sunburst"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["energy","foreign policy","security policy","state organisation","European policy","army","federalism","national identity","nuclear energy","political system","EU","military organisation","territorial questions","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>","<i>not defined<\/i>"],"parents":["","","","","foreign policy","security policy","state organisation","state organisation","energy","state organisation","European policy","army","federalism","European policy","army","energy","federalism","foreign policy","security policy","state organisation"],"ids":["energy","foreign policy","security policy","state organisation","European policy","army","federalism","national identity","nuclear energy","political system","EU","military organisation","territorial questions","NA_European policy","NA_army","NA_energy","NA_federalism","NA_foreign policy","NA_security policy","NA_state organisation"],"values":[1,1,2,11,1,2,4,6,1,1,1,2,4,0,0,0,0,0,0,0],"branchvalues":"total","insidetextorientation":"radial","type":"sunburst","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># naive count (way faster, but with misleading proportions on tier 2 and 3)</span></span></span>
<span class="r-in"><span><span class="fu">rdb</span><span class="fu">::</span><span class="fu"><a href="rfrnds.html">rfrnds</a></span><span class="op">(</span>country_code <span class="op">=</span> <span class="st">"AT"</span>,</span></span>
<span class="r-in"><span>            quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">rdb</span><span class="fu">::</span><span class="fu">plot_topic_segmentation</span><span class="op">(</span>method <span class="op">=</span> <span class="st">"naive"</span><span class="op">)</span></span></span>
<div id="htmlwidget-febe03efa1a2d8d52a86" style="width:700px;height:432.632880098888px;" class="plotly html-widget "></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"visdat":{"c40eb5f24b222":["function () ","plotlyVisDat"]},"cur_data":"c40eb5f24b222","attrs":{"c40eb5f24b222":{"labels":{},"parents":{},"ids":{},"values":{},"branchvalues":"remainder","insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sunburst"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["state organisation","foreign policy","security policy","energy","national identity","political system","federalism","European policy","army","nuclear energy","territorial questions","EU","military organisation"],"parents":["","","","","state organisation","state organisation","state organisation","foreign policy","security policy","energy","federalism","European policy","army"],"ids":["state organisation","foreign policy","security policy","energy","national identity","political system","federalism","European policy","army","nuclear energy","territorial questions","EU","military organisation"],"values":[6,1,2,1,6,1,4,1,2,1,4,1,2],"branchvalues":"remainder","insidetextorientation":"radial","type":"sunburst","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Salim Brüggemann, Uwe Serdült.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

    </footer></div>

  

  

  </body></html>

